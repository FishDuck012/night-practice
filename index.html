<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>thatskypiano</title>
<style>
<script>
alert("JS 有在跑");
</script>
body{
margin:0;
background:#0b1d35;
font-family:sans-serif;
overflow:hidden;
color:white;
}

#home{
padding:30px;
text-align:center;
}

h1{
font-weight:300;
letter-spacing:4px;
}

textarea{
width:80%;
height:100px;
border-radius:15px;
border:none;
padding:15px;
font-size:16px;
margin-top:20px;
background:rgba(255,255,255,0.1);
color:white;
}

button{
margin:15px;
padding:12px 25px;
border-radius:30px;
border:none;
background:rgba(255,255,255,0.15);
color:white;
font-size:16px;
}

#grid{
position:absolute;
top:0;
left:0;
width:100%;
}

.row{
display:grid;
grid-template-columns:repeat(5,1fr);
gap:15px;
margin:20px;
}

.cell{
width:100%;
padding-top:100%;
border-radius:15px;
background:rgba(255,255,255,0.05);
border:2px solid rgba(255,255,255,0.2);
transition:0.2s;
}

.active{
background:#88c9ff;
box-shadow:0 0 20px #88c9ff;
}

.hidden{
display:none;
}

</style>
</head>
<body>

<div id="home">
<h1>thatskypiano</h1>

<textarea id="input">5 6 8
15</textarea>
<br>
<button onclick="generate()">Generate</button>
<button onclick="enterImmersive()">Immersive</button>
<button onclick="startScroll()">Play</button>
</div>

<div id="grid" class="hidden"></div>

<script>

let scrolling=false;
let scrollY=0;

function generate(){
const grid=document.getElementById("grid");
grid.innerHTML="";
const lines=document.getElementById("input").value.trim().split("\n");

lines.forEach(line=>{
const numbers=line.trim().split(/\s+/);
const row=document.createElement("div");
row.className="row";

for(let i=1;i<=15;i++){
const cell=document.createElement("div");
cell.className="cell";
if(numbers.includes(i.toString())){
cell.classList.add("active");
}
row.appendChild(cell);
}

grid.appendChild(row);
});
}

function enterImmersive(){
document.getElementById("home").classList.add("hidden");
document.getElementById("grid").classList.remove("hidden");
}

function startScroll(){
if(scrolling) return;
scrolling=true;
scrollLoop();
}

function scrollLoop(){
if(!scrolling) return;

scrollY+=0.5;
document.getElementById("grid").style.transform=
"translateY(-"+scrollY+"px)";

requestAnimationFrame(scrollLoop);
}

document.addEventListener("click",function(e){

// 如果在沉浸模式中
if(!document.getElementById("home").classList.contains("hidden")) return;

if(scrolling){
scrolling=false; // 點擊停止滾動
}else{
document.getElementById("home").classList.remove("hidden");
document.getElementById("grid").classList.add("hidden");
scrollY=0;
document.getElementById("grid").style.transform="translateY(0px)";
}
});

</script>

</body>
</html>
